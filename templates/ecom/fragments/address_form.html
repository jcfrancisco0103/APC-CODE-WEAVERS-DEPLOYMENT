{% load widget_tweaks %}
{% load static %}
<style>
  .addr-card { max-width: 700px; margin: 0; background: #fff; border-radius: 12px; padding: 16px; }
  .addr-title { font-size: 1.25rem; font-weight: 700; color: #111827; margin-bottom: 12px; }
  .addr-form .form-group { margin-bottom: 12px; position: relative; }
  .addr-form .form-control { border-radius: 10px; padding-left: 42px; font-size: 1rem; box-shadow: none; border: 1px solid #d1d5db; background: #f8fafc; }
  .addr-form .form-control:focus { border: 1.5px solid #2563eb; background: #fff; }
  .addr-form .input-icon { position: absolute; left: 10px; top: 50%; transform: translateY(-50%); color: #9ca3af; font-size: 1rem; pointer-events: none; }
  .addr-form .btnSubmit { border: none; border-radius: 10px; padding: 10px 18px; background: #2563eb; color: #fff; font-weight: 600; }
</style>

<div id="address-form-wrapper"
     class="addr-card"
     data-region="{{ form.region.value|default_if_none:customer.region|escapejs }}"
     data-province="{{ form.province.value|default_if_none:customer.province|escapejs }}"
     data-citymun="{{ form.citymun.value|default_if_none:customer.citymun|escapejs }}"
     data-barangay="{{ form.barangay.value|default_if_none:customer.barangay|escapejs }}">
  <div class="addr-title">Change Address</div>

  {% if messages %}
    {% for message in messages %}
      <div class="alert {{ message.tags|default:'alert-info' }}" style="margin-bottom:10px;">{{ message }}</div>
    {% endfor %}
  {% endif %}

  <form method="post" action="{% url 'change-address' %}" class="addr-form">
    {% csrf_token %}
    <div class="form-group">
      <span class="input-icon"><i class="fa fa-map"></i></span>
      <select name="region" id="id_region" class="form-control"></select>
    </div>
    <div class="form-group">
      <span class="input-icon"><i class="fa fa-map-marker"></i></span>
      <select name="province" id="id_province" class="form-control"></select>
    </div>
    <div class="form-group">
      <span class="input-icon"><i class="fa fa-building"></i></span>
      <select name="citymun" id="id_citymun" class="form-control"></select>
    </div>
    <div class="form-group">
      <span class="input-icon"><i class="fa fa-location-arrow"></i></span>
      <select name="barangay" id="id_barangay" class="form-control"></select>
    </div>
    <div class="form-group">
      <span class="input-icon"><i class="fa fa-home"></i></span>
      {% render_field form.street_address class="form-control" placeholder="Street Address" %}
    </div>
    <div class="form-group">
      <span class="input-icon"><i class="fa fa-hashtag"></i></span>
      {% render_field form.postal_code class="form-control" placeholder="Postal Code" %}
    </div>
    <div style="display:flex; gap:10px;">
      <button type="submit" class="btnSubmit">Save Address</button>
    </div>
  </form>
</div>

